# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –†–û–£–¢–û–í - –ù–ê–ô–î–ï–ù–ê –ü–†–û–ë–õ–ï–ú–ê!

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:

–°–µ—Ä–≤–µ—Ä –ù–ï –∏–º–µ–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `/api`, –ø–æ—ç—Ç–æ–º—É:
- ‚ùå `/api/me` ‚Üí 404 (Cannot GET /api/me)
- ‚ùå `/api/booking` ‚Üí 404 (Cannot GET /api/booking)
- ‚úÖ `/me` ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º)
- ‚úÖ `/booking` ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º)

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

–î–æ–±–∞–≤–ª–µ–Ω `app.setGlobalPrefix('api')` –≤ `main.ts`

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

### 1. –û–±–Ω–æ–≤–∏—Ç–µ main.ts –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh root@193.233.103.8
cd ~/aviatickets-backend/tickets-backend/src
nano main.ts
```

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```typescript
const document = SwaggerModule.createDocument(app, config);
```

–î–æ–±–∞–≤—å—Ç–µ –ü–ï–†–ï–î –Ω–µ–π:
```typescript
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤
app.setGlobalPrefix('api');
```

–î–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è:
```typescript
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤
  app.setGlobalPrefix('api');

  // –°–æ–∑–¥–∞–µ–º Swagger –¥–æ–∫—É–º–µ–Ω—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –µ–≥–æ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ /api
  const document = SwaggerModule.createDocument(app, config);
  SwaggerModule.setup('api', app, document);
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: Ctrl+O, Enter, Ctrl+X

### 2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ

```bash
cd ~/aviatickets-backend/tickets-backend
npm run build
pm2 restart aviatickets-backend
pm2 logs aviatickets-backend --lines 20
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

```bash
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 401 (–Ω–µ 404!)
curl -i http://localhost:3000/api/me

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å Swagger UI
curl http://localhost:3000/api | head -20
```

## üì± –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

API_BASE —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ `http://193.233.103.8:3000/api`

–ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Expo:
```bash
cd aviatickets-demo
# –ù–∞–∂–º–∏—Ç–µ 'r' –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
```

## ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

–í—Å–µ —Ä–æ—É—Ç—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/api`:
- ‚úÖ `/api/auth/login`
- ‚úÖ `/api/me`
- ‚úÖ `/api/booking`
- ‚úÖ `/api/faq`
- ‚úÖ `/api/support/messages`

## üß™ –¢–µ—Å—Ç:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@test.com","password":"123456"}'

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–∫–µ–Ω
```

–ó–∞—Ç–µ–º —Å —Ç–æ–∫–µ–Ω–æ–º:
```bash
TOKEN="<–≤–∞—à_—Ç–æ–∫–µ–Ω>"
curl http://localhost:3000/api/me -H "Authorization: Bearer $TOKEN"

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ 404!)
```

## üìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É):

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å API_BASE –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞:
```javascript
return 'http://193.233.103.8:3000';
```

–ù–æ —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

# üìä –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ Aviatickets

## üéØ –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **full-stack –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         HTTP/REST API        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  React Native   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> ‚îÇ   NestJS API     ‚îÇ
‚îÇ  (Expo Mobile)  ‚îÇ  http://193.233.103.8:3000   ‚îÇ   (Backend)      ‚îÇ
‚îÇ                 ‚îÇ <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         JSON Response         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                            ‚îÇ
                                                            ‚îÇ Mongoose ODM
                                                            ‚ñº
                                                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                   ‚îÇ  MongoDB Atlas   ‚îÇ
                                                   ‚îÇ  (Cloud DB)      ‚îÇ
                                                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                            ‚îÇ
                                                            ‚îÇ HTTP API
                                                            ‚ñº
                                                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                   ‚îÇ   Onelya API     ‚îÇ
                                                   ‚îÇ (–ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤)   ‚îÇ
                                                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì± Frontend: React Native (Expo)

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|--------|------------|
| React | 19.1.0 | UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| React Native | 0.81.5 | –ú–æ–±–∏–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ |
| Expo | ~54.0.23 | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| React Navigation | ^7.x | –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏ |
| AsyncStorage | ^2.2.0 | –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ |
| Expo Image Picker | ^17.0.8 | –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤ |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
aviatickets-demo/
‚îÇ
‚îú‚îÄ‚îÄ screens/                    # 21 —ç–∫—Ä–∞–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ HomeScreen.js           # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ LoginScreen.js          # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ SignUpScreen.js         # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ SearchScreen.js         # –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ResultsScreen.js        # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ BookingScreen.js        # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ TicketsScreen.js        # –ú–æ–∏ –±–∏–ª–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ProfileScreen.js        # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ AccountScreen.js        # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ PaymentScreen.js        # –û–ø–ª–∞—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ SupportScreen.js        # –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ ...                     # –î—Ä—É–≥–∏–µ —ç–∫—Ä–∞–Ω—ã
‚îÇ
‚îú‚îÄ‚îÄ navigation/                 # –ù–∞–≤–∏–≥–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ RootNavigation.js       # –ö–æ—Ä–Ω–µ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (Stack)
‚îÇ   ‚îî‚îÄ‚îÄ BottomTabs.js           # –ù–∏–∂–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ (Home, Tickets, Profile)
‚îÇ
‚îú‚îÄ‚îÄ contexts/                   # React Context API
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.js          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
‚îÇ
‚îú‚îÄ‚îÄ lib/                        # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ api.js                  # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π HTTP –∫–ª–∏–µ–Ω—Ç
‚îÇ
‚îú‚îÄ‚îÄ constants/                  # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ api.js                  # API_BASE URL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ airports.js             # –°–ø–∏—Å–æ–∫ –∞—ç—Ä–æ–ø–æ—Ä—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ components/                 # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ FlightCard.js           # –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–π—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ Input.js                # –ü–æ–ª–µ –≤–≤–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ LoadingOverlay.js       # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ PrimaryButton.js        # –ö–Ω–æ–ø–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ assets/                     # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ icons/                  # –ò–∫–æ–Ω–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ icon.png                # –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ splash-icon.png         # Splash screen
‚îÇ   ‚îî‚îÄ‚îÄ avatar-placeholder.png  # –ê–≤–∞—Ç–∞—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚îÇ
‚îî‚îÄ‚îÄ App.js                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. **App.js** - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```javascript
- –ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤ Roboto (400, 500, 700)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AuthProvider
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NavigationContainer
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ SplashScreen –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
```

#### 2. **AuthContext.js** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
```javascript
–§—É–Ω–∫—Ü–∏–∏:
- login(accessToken, userData)      // –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- register(registerDto)             // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- logout()                          // –í—ã—Ö–æ–¥
- updateUser(newData)               // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

–°–æ—Å—Ç–æ—è–Ω–∏–µ:
- user: –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- token: JWT —Ç–æ–∫–µ–Ω
- loading: —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏

–•—Ä–∞–Ω–∏–ª–∏—â–µ: AsyncStorage
- authToken: JWT —Ç–æ–∫–µ–Ω
- user: JSON –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

#### 3. **api.js** - HTTP –∫–ª–∏–µ–Ω—Ç
```javascript
–§—É–Ω–∫—Ü–∏—è: api(endpoint, options)

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Authorization header
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ JSON/text –æ—Ç–≤–µ—Ç–æ–≤
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ 401
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
‚úÖ –£–º–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ URL (joinUrl)

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
const data = await api('/auth/login', {
  method: 'POST',
  body: JSON.stringify({ email, password })
});
```

#### 4. **RootNavigation.js** - –ù–∞–≤–∏–≥–∞—Ü–∏—è
```javascript
–°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- Stack Navigator (–∫–æ—Ä–Ω–µ–≤–æ–π)
  ‚îú‚îÄ‚îÄ Login (–µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
  ‚îú‚îÄ‚îÄ SignUp
  ‚îî‚îÄ‚îÄ MainTabs (–µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
      ‚îú‚îÄ‚îÄ Home
      ‚îú‚îÄ‚îÄ Tickets
      ‚îî‚îÄ‚îÄ Profile
```

### API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```javascript
// constants/api.js
export const API_BASE = 'http://193.233.103.8:3000/api';

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏:
1. process.env.EXPO_PUBLIC_API_BASE
2. Constants.expoConfig.extra.apiBase
3. Fallback: 'http://193.233.103.8:3000/api'
```

---

## üñ•Ô∏è Backend: NestJS

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|--------|------------|
| NestJS | ^10.0.0 | Backend framework |
| MongoDB | ^8.19.3 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Mongoose) |
| JWT | ^11.0.1 | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| Passport | ^0.7.0 | –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| Swagger | ^7.4.2 | API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| PDFKit | ^0.17.2 | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –±–∏–ª–µ—Ç–æ–≤ |
| Axios | ^1.13.2 | HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Onelya API |
| bcrypt | ^6.0.0 | –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

```
tickets-backend/src/
‚îÇ
‚îú‚îÄ‚îÄ main.ts                     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (app.setGlobalPrefix('api'))
‚îú‚îÄ‚îÄ app.module.ts               # –ö–æ—Ä–Ω–µ–≤–æ–π –º–æ–¥—É–ª—å
‚îÇ
‚îú‚îÄ‚îÄ auth/                       # üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.ts      # POST /api/auth/login, /register
‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts         # –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ auth.module.ts
‚îÇ   ‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.dto.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register.dto.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ oauth.dto.ts        # Google/Apple OAuth
‚îÇ   ‚îî‚îÄ‚îÄ guards/
‚îÇ       ‚îî‚îÄ‚îÄ jwt-auth.guard.ts   # JWT –∑–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ users/                      # üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ users.controller.ts     # GET/PUT /api/me
‚îÇ   ‚îú‚îÄ‚îÄ users.service.ts        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ users.module.ts
‚îÇ   ‚îî‚îÄ‚îÄ dto/
‚îÇ       ‚îî‚îÄ‚îÄ update-user.dto.ts
‚îÇ
‚îú‚îÄ‚îÄ booking/                    # üé´ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ booking.controller.ts   # POST /api/booking/create
‚îÇ   ‚îú‚îÄ‚îÄ booking.service.ts      # GET /api/booking, /api/booking/:id
‚îÇ   ‚îî‚îÄ‚îÄ booking.module.ts       # GET /api/booking/:id/pdf
‚îÇ
‚îú‚îÄ‚îÄ flights/                    # ‚úàÔ∏è –†–µ–π—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ flights.controller.ts   # POST /api/flights/search
‚îÇ   ‚îú‚îÄ‚îÄ flights.service.ts      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Onelya API
‚îÇ   ‚îú‚îÄ‚îÄ flights.module.ts
‚îÇ   ‚îî‚îÄ‚îÄ direct-search.controller.ts
‚îÇ
‚îú‚îÄ‚îÄ onelya/                     # üîå Onelya API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ onelya.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ onelya.service.ts       # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Onelya
‚îÇ   ‚îú‚îÄ‚îÄ onelya.health.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ onelya.module.ts
‚îÇ   ‚îú‚îÄ‚îÄ dto/                    # DTO –¥–ª—è Onelya –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ interceptors/
‚îÇ
‚îú‚îÄ‚îÄ faq/                        # ‚ùì FAQ
‚îÇ   ‚îú‚îÄ‚îÄ faq.controller.ts       # GET /api/faq
‚îÇ   ‚îú‚îÄ‚îÄ faq.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ faq.module.ts
‚îÇ   ‚îî‚îÄ‚îÄ faq-seed.service.ts     # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã
‚îÇ
‚îú‚îÄ‚îÄ support/                    # üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ support.controller.ts   # GET/POST /api/support/messages
‚îÇ   ‚îú‚îÄ‚îÄ support.service.ts
‚îÇ   ‚îî‚îÄ‚îÄ support.module.ts
‚îÇ
‚îú‚îÄ‚îÄ schemas/                    # üìÑ MongoDB —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ user.schema.ts          # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ booking.schema.ts       # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ faq.schema.ts           # FAQ
‚îÇ   ‚îî‚îÄ‚îÄ support-message.schema.ts
‚îÇ
‚îî‚îÄ‚îÄ providers/                  # üîß –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã
    ‚îú‚îÄ‚îÄ onelya.provider.ts
    ‚îî‚îÄ‚îÄ provider.interface.ts
```

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

#### 1. **main.ts** - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```typescript
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
‚úÖ app.setGlobalPrefix('api')           // –í—Å–µ —Ä–æ—É—Ç—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º /api
‚úÖ ValidationPipe (–≥–ª–æ–±–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)
‚úÖ Swagger UI –Ω–∞ /api
‚úÖ –ü–æ—Ä—Ç: process.env.PORT || 3000

–ó–∞–ø—É—Å–∫: http://localhost:3000/api
```

#### 2. **app.module.ts** - –ö–æ—Ä–Ω–µ–≤–æ–π –º–æ–¥—É–ª—å
```typescript
–ò–º–ø–æ—Ä—Ç—ã:
- ConfigModule.forRoot()                // –ó–∞–≥—Ä—É–∑–∫–∞ .env
- MongooseModule.forRoot()              // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB
- HttpModule.register()                 // HTTP –∫–ª–∏–µ–Ω—Ç (timeout: 15s)
- FlightsModule, BookingModule, AuthModule, UsersModule
- FaqModule, SupportModule, OnelyaModule
```

#### 3. **auth.service.ts** - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```typescript
–ú–µ—Ç–æ–¥—ã:
- register(dto): —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è + JWT
- login(dto): –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è + JWT
- googleAuth(dto): OAuth Google
- appleAuth(dto): OAuth Apple
- validateUser(email, password): –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

JWT Payload: { sub: userId, email }
```

#### 4. **booking.service.ts** - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```typescript
–ú–µ—Ç–æ–¥—ã:
- create(userId, bookingData): —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- getUserBookings(userId): —Å–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- getById(id): –ø–æ–ª—É—á–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- generatePDF(id): –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –±–∏–ª–µ—Ç–∞ (PDFKit)

PDF —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ú–∞—Ä—à—Ä—É—Ç (FROM ‚Üí TO)
- –ü–∞—Å—Å–∞–∂–∏—Ä, —Ä–µ–π—Å, –¥–∞—Ç–∞
- –í—Ä–µ–º—è –≤—ã–ª–µ—Ç–∞/–ø—Ä–∏–ª–µ—Ç–∞
- –ú–µ—Å—Ç–æ, –≤—ã—Ö–æ–¥, –ø–æ—Å–∞–¥–∫–∞
- –®—Ç—Ä–∏—Ö–∫–æ–¥ (code128)
```

### API Endpoints

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```
POST   /api/auth/register       # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST   /api/auth/login          # –í—Ö–æ–¥
POST   /api/auth/google         # Google OAuth
POST   /api/auth/apple          # Apple OAuth
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
```
GET    /api/me                  # –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (JWT)
PUT    /api/me                  # –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (JWT)
POST   /api/me/avatar           # –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä (JWT)
```

#### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```
POST   /api/booking/create      # –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (JWT)
GET    /api/booking             # –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (JWT)
GET    /api/booking/:id         # –ü–æ–ª—É—á–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (JWT)
GET    /api/booking/:id/pdf     # –°–∫–∞—á–∞—Ç—å PDF –±–∏–ª–µ—Ç (JWT)
```

#### –†–µ–π—Å—ã
```
POST   /api/flights/search      # –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤
GET    /api/flights/direct      # –ü—Ä—è–º—ã–µ —Ä–µ–π—Å—ã
```

#### –î—Ä—É–≥–∏–µ
```
GET    /api/faq                 # FAQ
GET    /api/support/messages    # –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (JWT)
POST   /api/support/messages    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (JWT)
GET    /api/onelya/health       # Health check Onelya API
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: MongoDB Atlas

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```env
MONGO_URI=mongodb+srv://Misha110208:Misha110208@aviamarket.7o9kplj.mongodb.net/tickets?retryWrites=true&w=majority&appName=aviamarket

–ë–∞–∑–∞: tickets
–•–æ—Å—Ç: aviamarket.7o9kplj.mongodb.net
```

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏

#### 1. **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
```javascript
{
  _id: ObjectId,
  email: String (unique),
  passwordHash: String,
  firstName: String,
  lastName: String,
  phone: String,
  avatar: String (base64),
  createdAt: Date,
  updatedAt: Date
}
```

#### 2. **bookings** - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```javascript
{
  _id: ObjectId,
  user: ObjectId (ref: 'User'),
  from: String,                    // –ö–æ–¥ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  to: String,                      // –ö–æ–¥ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞ –ø—Ä–∏–±—ã—Ç–∏—è
  departureDate: Date,
  flightNumber: String,
  departTime: String,
  arriveTime: String,
  passengers: [{
    fullName: String,
    passportNumber: String,
    dateOfBirth: Date
  }],
  seat: String,                    // –ú–µ—Å—Ç–æ (12A)
  gate: String,                    // –í—ã—Ö–æ–¥ (B5)
  boardingTime: String,            // –í—Ä–µ–º—è –ø–æ—Å–∞–¥–∫–∏
  payment: {
    amount: Number,
    currency: String
  },
  providerBookingId: String,       // ID –æ—Ç Onelya
  status: String,                  // confirmed, cancelled
  createdAt: Date
}
```

#### 3. **faqs** - FAQ
```javascript
{
  _id: ObjectId,
  question: String,
  answer: String,
  category: String,
  order: Number
}
```

#### 4. **supportmessages** - –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
```javascript
{
  _id: ObjectId,
  user: ObjectId (ref: 'User'),
  message: String,
  response: String,
  status: String,                  // pending, answered
  createdAt: Date
}
```

### –¢–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç

```
Email: test@test.com
–ü–∞—Ä–æ–ª—å: 123456
ID: 6930a7f7500ef1c618143a14
```

---

## üîå –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Onelya API

```env
ONELYA_BASE_URL=https://api-test.onelya.ru/
ONELYA_LOGIN=trevel_test
ONELYA_PASSWORD=5mPaN5KyB!27LN!
ONELYA_POS=trevel_test
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–∏—Å–∫ —Ä–µ–∞–ª—å–Ω—ã—Ö –∞–≤–∏–∞—Ä–µ–π—Å–æ–≤

**Endpoints:**
- POST /api/v1/search - –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤
- GET /api/v1/health - Health check

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### JWT Authentication

```typescript
–°—Ç—Ä–∞—Ç–µ–≥–∏—è: passport-jwt
Secret: JWT_SECRET (–∏–∑ .env)
Payload: { sub: userId, email }
Header: Authorization: Bearer <token>

–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã:
- /api/me (GET, PUT)
- /api/booking/* (–≤—Å–µ)
- /api/support/messages (GET, POST)
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è

```typescript
- class-validator –¥–ª—è DTO
- ValidationPipe (–≥–ª–æ–±–∞–ª—å–Ω—ã–π)
- whitelist: true (—É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø–æ–ª–µ–π)
- forbidNonWhitelisted: true (–æ—à–∏–±–∫–∞ –ø—Ä–∏ –ª–∏—à–Ω–∏—Ö –ø–æ–ª—è—Ö)
```

### –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

```typescript
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: bcrypt
–†–∞—É–Ω–¥—ã: 10
–ú–µ—Ç–æ–¥: bcrypt.hash(password, 10)
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Backend (Timeweb)

```bash
–°–µ—Ä–≤–µ—Ä: http://193.233.103.8:3000
–ü–æ—Ä—Ç: 3000
–ü—Ä–µ—Ñ–∏–∫—Å: /api

–ó–∞–ø—É—Å–∫:
npm run build
npm run start:prod

PM2:
pm2 start ecosystem.config.js
pm2 logs tickets-backend
```

### Frontend (Expo)

```bash
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
npx expo start

–°–±–æ—Ä–∫–∞:
npx expo build:android
npx expo build:ios

EAS Build:
eas build --platform android
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

### Frontend
- **–≠–∫—Ä–∞–Ω—ã:** 21
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** 4
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç—ã:** 1 (AuthContext)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 25+

### Backend
- **–ú–æ–¥—É–ª–∏:** 7 (Auth, Users, Booking, Flights, FAQ, Support, Onelya)
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:** 10+
- **–°–µ—Ä–≤–∏—Å—ã:** 10+
- **–°—Ö–µ–º—ã:** 4
- **Endpoints:** 15+

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ–ª–ª–µ–∫—Ü–∏–∏:** 4
- **–ò–Ω–¥–µ–∫—Å—ã:** email (unique) –≤ users

---

## üîß –°–∫—Ä–∏–ø—Ç—ã

### Backend
```bash
npm run start:dev          # –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (watch mode)
npm run start:prod         # –ü—Ä–æ–¥–∞–∫—à–Ω
npm run build              # –°–±–æ—Ä–∫–∞ TypeScript
npm run lint               # ESLint
npm run test               # Jest —Ç–µ—Å—Ç—ã
```

### Frontend
```bash
npm start                  # Expo dev server
npm run android            # Android —ç–º—É–ª—è—Ç–æ—Ä
npm run ios                # iOS —Å–∏–º—É–ª—è—Ç–æ—Ä
npm run web                # Web –≤–µ—Ä—Å–∏—è
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `app.setGlobalPrefix('api')` –≤ main.ts
2. ‚úÖ API_BASE –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ `http://193.233.103.8:3000/api`
3. ‚úÖ –í—Å–µ fetch –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é api()
4. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Login –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)

### üîÑ –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ
1. ‚ö†Ô∏è –û–±–Ω–æ–≤–∏—Ç—å main.ts –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Timeweb
2. ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –¥–æ–º–µ–Ω–∞
3. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è API
4. ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Winston/Pino)

---

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### Backend
1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Redis –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** Winston + —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** PM2 + Sentry
4. **–¢–µ—Å—Ç—ã:** Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ (Jest)
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** Swagger –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö endpoints

### Frontend
1. **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** Redux/Zustand –≤–º–µ—Å—Ç–æ Context API
2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** React Query –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** React.memo, useMemo, useCallback
4. **–¢–µ—Å—Ç—ã:** Jest + React Native Testing Library
5. **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** TypeScript –≤–º–µ—Å—Ç–æ JavaScript

### DevOps
1. **CI/CD:** GitHub Actions –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è
2. **Docker:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è backend
3. **Nginx:** Reverse proxy + SSL
4. **Backup:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup MongoDB
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** Grafana + Prometheus

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤ —Å:

‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–µ–∫–æ–º:** React Native + NestJS + MongoDB  
‚úÖ **JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π:** –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
‚úÖ **REST API:** –ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ endpoints  
‚úÖ **PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤  
‚úÖ **–í–Ω–µ—à–Ω–∏–º–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏:** Onelya API –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–æ–≤  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:** Swagger UI –¥–ª—è API  

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ú–æ–¥—É–ª—å–Ω–∞—è, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è, —Å–ª–µ–¥—É–µ—Ç best practices NestJS –∏ React Native.

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é.

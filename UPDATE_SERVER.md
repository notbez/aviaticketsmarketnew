# üîß –°–†–û–ß–ù–û: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ Timeweb

## –ü—Ä–æ–±–ª–µ–º–∞
–°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π JWT_SECRET, –ø–æ—ç—Ç–æ–º—É —Ç–æ–∫–µ–Ω—ã –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è.

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@193.233.103.8
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª
```bash
cd ~/aviatickets-backend/tickets-backend
nano .env
```

**–ó–∞–º–µ–Ω–∏—Ç–µ –≤–µ—Å—å —Ñ–∞–π–ª –Ω–∞:**
```env
PORT=3000

ONELYA_BASE_URL=https://api-test.onelya.ru/
ONELYA_LOGIN=trevel_test
ONELYA_PASSWORD=5mPaN5KyB!27LN!
ONELYA_POS=trevel_test

JWT_SECRET=a7f3e9c2b8d4f1a6e5c9b3d7f2a8e4c1b9d5f3a7e2c8b4d1f6a9e3c7b2d8f4a1

MONGO_URI=mongodb+srv://Misha110208:Misha110208@aviamarket.7o9kplj.mongodb.net/tickets?retryWrites=true&w=majority&appName=aviamarket

NODE_ENV=production
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** Ctrl+O, Enter, Ctrl+X

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
cd ~/aviatickets-backend/tickets-backend/src

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ git (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
git pull
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
pm2 restart aviatickets-backend
pm2 logs aviatickets-backend --lines 50
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É
```bash
# –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
curl -X POST http://localhost:3000/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@test.com","password":"123456"}'

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–∫–µ–Ω –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –ø–æ SSH, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–∏ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Timeweb:

1. **tickets-backend/.env** - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **tickets-backend/src/booking/booking.controller.ts** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
3. **tickets-backend/src/users/users.controller.ts** - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

–ü–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## ‚úÖ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í—ã–π–¥–∏—Ç–µ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ (–µ—Å–ª–∏ –±—ã–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã)
3. –í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ: test@test.com / 123456
4. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–ú–æ–∏ –±–∏–ª–µ—Ç—ã"
6. –ó–∞–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å ‚Üí –∞–∫–∫–∞—É–Ω—Ç

–í—Å–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å! üéâ
